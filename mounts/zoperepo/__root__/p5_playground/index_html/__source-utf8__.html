<p metal:use-macro="context/master_pt/macros/std_page">
  <div metal:fill-slot="std_body">

    <script src="/lib/js/codemirror.js"></script>
    <link rel="stylesheet" href="/lib/css/codemirror.css">
    <script src="/lib/js/javascript.js"></script>
	<script src="examples_js"></script>
	<script src="custom_js"></script>
	<script src="p5.sound.js"></script>

    <h1>p5js playground</h1>

    <nav aria-label="breadcrumb">
      <ol class="breadcrumb">
        <li class="breadcrumb-item"><a href="../index_html">Home</a></li>
        <li class="breadcrumb-item active" aria-current="page">p5js playground</li>
      </ol>
    </nav>

    <button type="button" class="btn btn-success" onclick="start_tut(event)">
        <i class="fa-solid fa-graduation-cap"></i>
        Tutorial
    </button>

    <button id="show_bp_model" type="button" class="btn btn-success" data-tour="step: 20; title: BlazePose Model; content: BlazePose joint indexmap can be looked up here">
        <i class="fa-solid fa-person"></i>
        BlazePose Model
    </button>

    <button id="live_mode_btn" type="button" class="btn btn-danger" data-tour="step: 200; title: Live Mode View; content: Switch to live mode view, hide everything except of p5 canvas. Attention! No way back but to reload page!">
        Live Mode View
    </button>

    <div class="form-check form-switch mb-3 mt-3" data-tour="step: 210; title: Live Mode View switch; content: Activate live mode for data, activate to avoid loading data if not needed">
        <input class="form-check-input" type="checkbox" id="livemode_check">
        <label class="form-check-label" for="livemode_check">Use buffered data</label>
    </div>

    <div class="container-fluid">
        <div class="row">
            <div class="col">
                <h4>p5 stage</h4>

                <div class="input-group mb-3">
                    <label class="input-group-text" for="choreo_id">Record to use as DATA</label>
                    <select class="form-select" id="choreo_id" aria-label="Record to use as DATA" data-tour="step: 1; title: Record selection; content: Start by selecting the record you want to run here">
                    </select>
                    <label class="input-group-text" for="jsonpath">jsonPath</label>
                    <input id="jsonpath" type="text" class="form-control" value="$[*]" aria-label="jsonPath" data-tour="step: 2; title: jsonPath filter; content: Optionally you can further filter your data via jsonPath">

                    <button class="btn btn-primary" id="run_code" type="button" data-tour="step: 10; title: Run code; content: Now you can run your code using this button OR you press CTRL+R ;-)">
                        <i class="fa-solid fa-play"></i>
                        <span id="run_label">Run code</span>
                        <span id="data_loading" style="display: none;" class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span>
                    </button>
                </div>

                <div id="p5_stage" data-tour="step: 8; title: p5 stage; content: The p5 canvas will be shown here"></div>

                <h4>Result image download</h4>
                <div class="input-group mb-3">
                    <button class="btn btn-outline-secondary" id="download_svg" type="button" data-tour="step: 12; title: SVG result download; content: Download result images as SVG">
                        <i class="fa-solid fa-download"></i>
                        Download SVG
                    </button>
                    <button class="btn btn-outline-secondary" id="download_png" type="button" data-tour="step: 13; title: PNG result download; content: Download result images as PNG">
                        <i class="fa-solid fa-download"></i>
                        Download PNG
                    </button>
                </div>

            </div>
            <div class="col">

                <h4>Code import / export</h4>
                <div class="input-group mb-3">

                    <label class="input-group-text" for="example_chooser">Examples</label>
                    <select class="form-select" id="example_chooser" data-tour="step: 4; title: Code examples; content: Code examples for inspiration can be selected here">
                    </select>

                    <input id="import_file" type="file" class="form-control" aria-label="jsonPath" data-tour="step: 3; title: Code import; content: Prepared code can be imported here">
                    <button class="btn btn-outline-secondary" id="import_code" type="button">
                        <i class="fa-solid fa-file-import"></i>
                        Import code
                    </button>

                    <button class="btn btn-outline-secondary" id="download_code" type="button" data-tour="step: 11; title: Code download; content: Save your code via download here or press CTRL+S">
                        <i class="fa-solid fa-download"></i>
                        Download code
                    </button>
            
                </div>

                <h4>JS editor</h4>
                <div id="editor" data-tour="step: 9; title: JS editor; content: Feel free to edit JS code directly here!"></div>
            </div>
        </div>
    </div>

<div class="modal fade" id="bp_info_modal" data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
  <div class="modal-dialog mw-100">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="staticBackdropLabel">BlazePose Model Diagram</h5>
      </div>
      <div class="modal-body">
          <img src="/lib/assets/img/bp_model.png" alt="BlazePose Joint diagram"></img>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-primary" data-bs-dismiss="modal" id="video_abort_btn">OK</button>
      </div>
    </div>
  </div>
</div>





  </div>
</p>